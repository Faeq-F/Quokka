const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./qGfzr2s5.js","./BTWvtxw7.js","./YrtiDZ3v.js","./entry.BwYyhUB3.css","./MazCard.y7MorVNd.css","./MazSpinner.BI6kEhM7.css","./DrXpDWuD.js","./CDNEEv38.js","./6HV_XSne.js"])))=>i.map(i=>d[i]);
import{e as le,N as Ie,q as w,c as y,i as k,o as b,a as _,F as ae,r as oe,n as T,Q as V,f as L,t as Ee,v as ne,b as z,k as N,l as H,bc as R,h as f,as as Le,B as we,z as Ce,A as xe,R as O,a0 as ze,aL as _e}from"./YrtiDZ3v.js";import{Q as ie}from"./BTWvtxw7.js";var Pe=Object.defineProperty,Oe=(o,e,t)=>e in o?Pe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,p=(o,e,t)=>Oe(o,typeof e!="symbol"?e+"":e,t);function ke(o,e){let t=e==null?void 0:e.element;function s(){t&&R(null,t)}const r={...e==null?void 0:e.props,destroy:s},i=z(o,r,e==null?void 0:e.children);return e!=null&&e.app?(i.appContext=e.app._context,t?R(i,t):typeof document<"u"&&(t=document.createElement("div"),R(i,t))):(t=t??document.body,R(i,t)),{vNode:i,destroy:s,el:t}}function He(o,e,t){const s={maxAttempts:20,interval:100,...t};let r=0;function i(){const d=o();d!=null?s.expectedValue!==void 0&&d!==s.expectedValue?r<s.maxAttempts?(r++,setTimeout(i,s.interval)):console.warn(s.errorMessage||`[maz-ui](checkAvailability) Nothing found after ${s.maxAttempts} attempts for ref ${d}`):e(d):r<s.maxAttempts?(r++,setTimeout(i,s.interval)):console.warn(s.errorMessage||`[maz-ui](checkAvailability) Nothing found or expected value after ${s.maxAttempts} attempts for ref ${d}`)}i()}const Be=["onKeypress"],Se={class:"m-fullscreen-img-scroller"},$e=["src","alt"],Re=le({__name:"MazFullscreenImg",props:{src:{},clickedElementBounds:{default:void 0},offset:{default:void 0},animation:{default:()=>({duration:300,easing:"ease-in-out"})},openInstanceClass:{default:"m-fullscreen-img-instance"},clickedElement:{},destroy:{type:Function,default:void 0},alt:{default:void 0},zoom:{type:Boolean,default:!0}},emits:["close","previous","next","before-close"],setup(o,{emit:e}){const t=o,s=e,r=N(()=>H(()=>import("./qGfzr2s5.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),i=N(()=>H(()=>import("./DrXpDWuD.js"),__vite__mapDeps([6,2,3]),import.meta.url)),d=N(()=>H(()=>import("./CDNEEv38.js"),__vite__mapDeps([7,2,3]),import.meta.url)),A=f(!1),x=f(!1),C=f(!1),h=f(!1),m=f(!1),u=Le({running:!1,ended:!1}),c=f(t.clickedElement),ue=w(()=>t.clickedElement.getBoundingClientRect()),B=f(),U=f(t.src),Z=f(t.alt),K=f(),g=f(),S=f(!0),me=w(()=>({"--is-zoomed":m.value,"--invisible":S.value,"--absolute":!m.value}));function ce(){var a,n;g.value&&(B.value=((a=g.value)==null?void 0:a.naturalWidth)>((n=g.value)==null?void 0:n.naturalHeight)),A.value=!0,x.value=!1,C.value=!0}we(C,a=>{a&&pe()},{immediate:!0});function $(){s("before-close"),ye()}function Q(a){a.key==="Escape"&&(a.preventDefault(),$()),(a.key==="ArrowLeft"||a.key==="ArrowRight")&&(a.preventDefault(),F(a.key==="ArrowRight"?"next":"previous"))}function de(){document.documentElement.classList.add("--m-fullscreen-open")}function he(){document.documentElement.classList.remove("--m-fullscreen-open")}function G(){return[...document.querySelectorAll(".m-fullscreen-img-instance")]}function ve(a,n){return n<0?a.length-1:n>=a.length?0:n}function ge(a,n){a.classList.remove(t.openInstanceClass),n.classList.add(t.openInstanceClass);const l=n.getAttribute("data-src"),v=n.getAttribute("data-alt");Z.value=v,U.value=l??U.value}function F(a){S.value=!0;const n=document.querySelector(`.m-fullscreen-img-instance.${t.openInstanceClass}`);if(n){const l=G(),v=l.indexOf(n),I=a==="next"?v+1:v-1,E=l[ve(l,I)];c.value=E,E&&ge(n,E),s(a),A.value=!1,x.value=!0,He(()=>A.value===!0,()=>{S.value=!1,m.value?Y():P()},{expectedValue:!0,interval:100,maxAttempts:50})}}function Y(){const a=g.value;if(!a){console.error("[maz-ui](vFullscreenImg) ImgElement is not defined");return}a.style.removeProperty("max-width"),a.style.removeProperty("max-height"),a==null||a.style.removeProperty("top"),a==null||a.style.removeProperty("left"),B.value?(a.style.height="100vh",a.style.removeProperty("width")):(a.style.width="100vw",a.style.removeProperty("height"))}function fe(){m.value?(m.value=!m.value,P()):(m.value=!m.value,Y())}function X(a){var n;u.running=!0,S.value=!1;const l=(n=g.value)==null?void 0:n.animate(a,{duration:t.animation.duration,easing:t.animation.easing});if(!l){console.error("[maz-ui](vFullscreenImg) animation is not defined"),u.running=!1,u.ended=!0;return}return l}function J(a=t.offset??0){const n=c.value.clientWidth||1,l=c.value.clientHeight||1,v=window.innerWidth,I=window.innerHeight,E=Math.min((v-2*a)/n,(I-2*a)/l),W=(v-n*E)/2,q=(I-l*E)/2;return{centerX:W,centerY:q,width:n,height:l,scale:E}}function ee({trigger:a}){const{width:n,height:l,scale:v,centerX:I,centerY:E}=J(),{top:W,left:q,width:be,height:Ae}=ue.value,se=[{top:`${W}px`,left:`${q}px`,width:`${be}px`,height:`${Ae}px`,opacity:0},{top:`${E}px`,left:`${I}px`,width:`${n*v}px`,height:`${l*v}px`,opacity:1}];return{frames:a==="open"?se:se.reverse()}}function P(){const{height:a,width:n,scale:l}=J(),v=B.value?{width:`${n*l}px`,maxHeight:`${a*l}px`}:{height:`${a*l}px`,maxWidth:`${n*l}px`};if(!g.value){console.error("[maz-ui](vFullscreenImg) ImgElement is not defined");return}B.value?(g.value.style.removeProperty("height"),g.value.style.removeProperty("maxHeight")):(g.value.style.removeProperty("width"),g.value.style.removeProperty("maxWidth")),Object.assign(g.value.style,v)}function pe(){const{frames:a}=ee({trigger:"open"}),n=X(a);if(!n){console.error("[maz-ui](vFullscreenImg) open animation is not defined"),P();return}n.onfinish=()=>{P(),u.running=!1,u.ended=!0}}function ye(){const{frames:a}=ee({trigger:"close"}),n=X(a);function l(){var v,I;s("close"),(v=K.value)==null||v.remove(),(I=t.destroy)==null||I.call(t),u.running=!1,u.ended=!0}if(!n){console.error("[maz-ui](vFullscreenImg) close animation is not defined"),l();return}n.onfinish=l}function te(){m.value||P()}return Ce(()=>{x.value=!0,document.addEventListener("keydown",Q),window.addEventListener("resize",te),de(),h.value=G().length>1}),xe(()=>{document.removeEventListener("keydown",Q),window.removeEventListener("resize",te),he()}),(a,n)=>(b(),y("div",{ref_key:"FullscreenImgElement",ref:K,role:"button",class:"m-fullscreen-img m-reset-css",tabindex:"0",onClick:O($,["stop"]),onKeypress:_e(O($,["prevent"]),["esc"])},[C.value&&h.value?(b(),y("button",{key:0,type:"button",class:"m-fullscreen-btn --next",onClick:n[0]||(n[0]=O(l=>F("next"),["stop"]))},[z(L(d),{class:"maz-rotate-180"})])):k("v-if",!0),C.value&&h.value?(b(),y("button",{key:1,type:"button",class:"m-fullscreen-btn --previous",onClick:n[1]||(n[1]=O(l=>F("previous"),["stop"]))},[z(L(d))])):k("v-if",!0),_("button",{type:"button",class:"m-fullscreen-btn --close",onClick:$},[z(L(i))]),_("div",Se,[_("img",{ref_key:"ImgElement",ref:g,src:U.value,alt:Z.value??void 0,tabindex:"0",class:T([me.value]),onLoad:ce,onClick:n[2]||(n[2]=O(l=>a.zoom&&fe(),["stop"]))},null,42,$e),V(z(L(r),{class:"m-fullscreen-img-loader"},null,512),[[ze,x.value]])])],40,Be))}}),De=ie(Re,[["__scopeId","data-v-24a18baf"]]),re="m-fullscreen-is-open";class Me{constructor(){p(this,"options"),p(this,"defaultOptions",{scaleOnHover:!1,blurOnHover:!1,disabled:!1,zoom:!0,offset:80,animation:{duration:300,easing:"ease-in-out"}}),p(this,"mouseEnterListener"),p(this,"mouseLeaveListener"),p(this,"renderPreviewListener")}buildOptions(e,t){const s=typeof t.value=="object"?t.value:{src:t.value,alt:void 0},r=(s==null?void 0:s.src)??this.getImgSrc(e),i=(s==null?void 0:s.alt)??this.getImgAlt(e);return{...this.defaultOptions,...s,src:r,alt:i}}get allInstances(){return[...document.querySelectorAll(".m-fullscreen-img-instance")]}getImgSrc(e){var t;const s=((t=this.options)==null?void 0:t.src)||e.getAttribute("src")||e.getAttribute("data-src");if(!s)throw new Error('[maz-ui](fullscreen-img) src of image must be provided by `v-fullscreen=""`, `v-fullscreen="{ src: "" }"`, `src=""` or `data-src=""` atributes');return s}getImgAlt(e){var t;return((t=this.options)==null?void 0:t.alt)||e.getAttribute("alt")||e.getAttribute("data-alt")}create(e,t){if(this.options=this.buildOptions(e,t),this.options.disabled)return;e.style.cursor="move",(this.options.scaleOnHover||this.options.blurOnHover)&&(e.style.transition="all 200ms ease-in-out"),e.classList.add("m-fullscreen-img-instance"),e.setAttribute("data-src",this.getImgSrc(e));const s=this.getImgAlt(e);s&&e.setAttribute("data-alt",s),this.mouseEnterListener=()=>this.mouseEnter(e),this.mouseLeaveListener=()=>this.mouseLeave(e),this.renderPreviewListener=()=>this.renderPreview(e),e.addEventListener("mouseenter",this.mouseEnterListener),e.addEventListener("mouseleave",this.mouseLeaveListener),e.addEventListener("click",this.renderPreviewListener)}update(e,t){this.options=this.buildOptions(e,t)}remove(e){e.removeEventListener("mouseenter",this.mouseEnterListener),e.removeEventListener("mouseleave",this.mouseLeaveListener),e.removeEventListener("click",this.renderPreviewListener),e.classList.remove("m-fullscreen-img-instance"),e.style.cursor=""}renderPreview(e){return e.classList.add(re),ke(De,{props:{...this.options,openInstanceClass:re,clickedElement:e,clickedElementBounds:e.getBoundingClientRect()}})}mouseLeave(e){this.options.scaleOnHover&&(e.style.transform=""),this.options.blurOnHover&&(e.style.filter=""),e.style.zIndex=""}mouseEnter(e){e.style.zIndex="1",this.options.scaleOnHover&&(e.style.transform="scale(1.04)"),this.options.blurOnHover&&(e.style.filter="blur(3px)")}}let D;const j={mounted(o,e){return D=new Me,D.create(o,e)},updated(o,e){return D.update(o,e)},unmounted(o){return D.remove(o)}},Te="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ve={baseClass:"m-lazy-img",loadedClass:"m-lazy-loaded",loadingClass:"m-lazy-loading",errorClass:"m-lazy-error",noPhotoClass:"m-lazy-no-photo",noPhoto:!1,observerOnce:!0,loadOnce:!1,noUseErrorPhoto:!1,observerOptions:{threshold:.1}};class Ne{constructor(e={}){p(this,"observers",[]),p(this,"defaultOptions",Ve),p(this,"options"),p(this,"onImgLoadedCallback"),p(this,"onImgErrorCallback"),p(this,"hasImgLoaded",!1),this.options=this.buildOptions(e),this.onImgLoadedCallback=this.imageIsLoaded.bind(this),this.onImgErrorCallback=this.imageHasError.bind(this)}async loadErrorPhoto(){const{default:e}=await H(async()=>{const{default:t}=await import("./BldgfQBh.js");return{default:t}},[],import.meta.url);return e}buildOptions(e){return{...this.defaultOptions,...e,observerOptions:{...this.defaultOptions.observerOptions,...e.observerOptions}}}removeClass(e,t){e.classList.remove(t)}addClass(e,t){e.classList.add(t)}removeAllStateClasses(e){this.removeClass(e,this.options.loadedClass),this.removeClass(e,this.options.loadingClass),this.removeClass(e,this.options.errorClass),this.removeClass(e,this.options.noPhotoClass)}setBaseClass(e){this.addClass(e,this.options.baseClass)}imageIsLoading(e){var t,s;this.addClass(e,this.options.loadingClass),(s=(t=this.options).onLoading)==null||s.call(t,e)}imageHasNoPhoto(e){this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.noPhotoClass),this.setDefaultPhoto(e)}imageIsLoaded(e){var t,s;this.hasImgLoaded=!0,this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.loadedClass),(s=(t=this.options).onLoaded)==null||s.call(t,e)}imageHasError(e){var t,s;this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.errorClass),(s=(t=this.options).onError)==null||s.call(t,e),this.setDefaultPhoto(e)}getSrc(e){return typeof e.value=="object"?e.value.src:e.value}getImageUrl(e,t){return this.getImgElement(e).getAttribute("data-lazy-src")||this.getSrc(t)}async setPictureSourceUrls(e){const t=e.querySelectorAll("source");if(t.length>0)for await(const s of t){const r=s.getAttribute("data-lazy-srcset");if(r)s.srcset=r;else return this.imageHasError(e)}else this.imageHasError(e)}hasBgImgMode(e){return e.arg==="bg-image"}isPictureElement(e){return e instanceof HTMLPictureElement}getImgElement(e){return this.isPictureElement(e)?e.querySelector("img"):e}async setDefaultPhoto(e){if(this.options.noUseErrorPhoto)return;const t=this.options.fallbackSrc??this.options.errorPhoto;typeof t=="string"&&this.addClass(e,this.options.noPhotoClass);const s=t??await this.loadErrorPhoto(),r=e.querySelectorAll("source");if(r.length>0)for await(const i of r)i.srcset=s;else this.setImgSrc(e,s)}addEventListenerToImg(e){const t=this.getImgElement(e);t.addEventListener("load",()=>this.onImgLoadedCallback(e),{once:!0}),t.addEventListener("error",s=>this.onImgErrorCallback(e,s),{once:!0})}async loadImage(e,t){if(this.imageIsLoading(e),this.isPictureElement(e))this.addEventListenerToImg(e),await this.setPictureSourceUrls(e);else{const s=this.getImageUrl(e,t);if(!s)return this.imageHasError(e);this.hasBgImgMode(t)?(e.style.backgroundImage=`url('${s}')`,this.imageIsLoaded(e)):(this.addEventListenerToImg(e),this.setImgSrc(e,s))}}setImgSrc(e,t){const s=this.getImgElement(e);s.src=t}handleIntersectionObserver(e,t,s,r){var i,d;this.observers.push(r);for(const A of s)if(A.isIntersecting){if((d=(i=this.options).onIntersecting)==null||d.call(i,A.target),this.options.observerOnce&&r.unobserve(e),this.options.loadOnce&&this.hasImgLoaded)return;this.loadImage(e,t)}}createObserver(e,t){const s=(i,d)=>{this.handleIntersectionObserver(e,t,i,d)},r=this.options.observerOptions;new IntersectionObserver(s,r).observe(e)}async imageHandler(e,t,s){if(s==="update")for await(const r of this.observers)r.unobserve(e);window.IntersectionObserver?this.createObserver(e,t):this.loadImage(e,t)}async bindUpdateHandler(e,t,s){if(this.options.noPhoto)return this.imageHasNoPhoto(e);await this.imageHandler(e,t,s)}async add(e,t){if(this.hasBgImgMode(t)&&this.isPictureElement(e))throw new Error(`[MazLazyImg] You can't use the "bg-image" mode with "<picture />" element`);setTimeout(()=>this.setBaseClass(e),0),e.getAttribute("src")||this.setImgSrc(e,Te),await this.bindUpdateHandler(e,t,"bind")}async update(e,t){t.value!==t.oldValue&&(this.hasImgLoaded=!1,this.removeAllStateClasses(e),await this.bindUpdateHandler(e,t,"update"))}remove(e,t){this.hasImgLoaded=!1,this.hasBgImgMode(t)&&(e.style.backgroundImage=""),this.removeAllStateClasses(e);for(const s of this.observers)s.unobserve(e);this.observers=[]}}let M;const Ue={created(o,e){const t=typeof e.value=="object"?e.value:{};M=new Ne(t),M.add(o,e)},updated(o,e){M.update(o,e)},unmounted(o,e){M.remove(o,e)}},Fe={class:"m-gallery__wrapper maz-flex maz-flex-1"},We=["alt"],qe={key:0,class:"m-gallery__remaining-layer maz-flex maz-bg-overlay maz-flex-center"},je={class:"maz-text-2xl maz-text-white"},Ze=le({__name:"MazGallery",props:{images:{type:Array,default:()=>[]},imagesShownCount:{type:Number,default:5},noRemaining:{type:Boolean,default:!1},height:{type:[Number,String],default:150},noHeight:{type:Boolean,default:!1},width:{type:[Number,String],default:"100%"},noWidth:{type:Boolean,default:!1},noRadius:{type:Boolean,default:!1},noZoom:{type:Boolean,default:!1},hasEmptyLayer:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},blur:{type:Boolean,default:!0},scale:{type:Boolean,default:!0},separatorColor:{type:String,default:"transparent"}},setup(o){const e=o,t=N(()=>H(()=>import("./6HV_XSne.js"),__vite__mapDeps([8,2,3]),import.meta.url));Ie(()=>{e.imagesShownCount>5&&console.warn('[MazUI](m-gallery) The maximum of "images-shown-count" is 5')});const s=w(()=>{const h=e.noWidth,m=e.width,u=e.noHeight,c=e.height;return{...h?{}:{flex:`0 0 ${typeof m}`=="number"?`${m}px`:m,width:typeof m=="number"?`${m}px`:m},...u?{}:{height:typeof c=="number"?`${c}px`:`${c}`,minHeight:typeof c=="number"?`${c}px`:`${c}`}}}),r=w(()=>e.imagesShownCount<=5?e.imagesShownCount:5),i=w(()=>e.images.length-(e.images.length<r.value?e.images.length:r.value)),d=w(()=>e.images.map(h=>typeof h=="object"?{...h,thumbnail:h.thumbnail??h.src}:{src:h,thumbnail:h,alt:void 0})),A=w(()=>d.value.slice(0,r.value)),x=w(()=>d.value.slice(r.value,e.images.length));function C(h){return e.noRemaining?!1:(i.value&&h+1)===A.value.length}return(h,m)=>o.images.length>0||o.hasEmptyLayer?(b(),y("div",{key:0,class:T(["m-gallery m-reset-css",{"maz-rounded":!o.noRadius}]),style:ne([s.value,{"--gallery-separator-color":o.separatorColor}])},[_("section",Fe,[(b(!0),y(ae,null,oe(A.value,(u,c)=>(b(),y("figure",{key:c,class:T(["m-gallery__item !maz-my-0 maz-flex maz-flex-center",[`m-gallery__item--${c+1}`]])},[V(_("img",{class:"m-gallery__item__image maz-flex-1",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:u.alt,loading:"lazy"},null,8,We),[[L(Ue),{src:u.thumbnail,disabled:!o.lazy},"bg-image"],[L(j),{src:u.src,alt:u.alt,disabled:o.noZoom||C(c),blurOnHover:o.blur,scaleOnHover:o.scale}]]),C(c)?V((b(),y("div",qe,[_("span",je,"+"+Ee(i.value),1)])),[[L(j),{src:u.src,alt:u.alt,disabled:o.noZoom,blurOnHover:!1,scaleOnHover:o.scale}]]):k("v-if",!0)],2))),128)),o.hasEmptyLayer&&o.images.length===0?(b(),y("div",{key:0,class:T(["empty-layer maz-flex maz-w-full maz-bg-color-light maz-text-normal maz-flex-center",{"maz-rounded-xl":!o.noRadius}]),style:ne([s.value])},[z(L(t),{class:"maz-h-8 maz-w-8"})],6)):k("v-if",!0)]),(b(!0),y(ae,null,oe(x.value,(u,c)=>V((b(),y("div",{key:c,class:"m-gallery__hidden"})),[[L(j),{src:u.src,disabled:o.noZoom}]])),128))],6)):k("v-if",!0)}}),Ge=ie(Ze,[["__scopeId","data-v-a92296a0"]]);export{Ge as default};
