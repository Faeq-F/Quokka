function b(){return b=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u])}return t},b.apply(this,arguments)}var U=.996,$=function(r,o){return o===void 0&&(o=U),r*o/(1-o)};function k(t){return t[t.length-1]}function q(t){return t.reduce(function(r,o){return r+o})/t.length}var J=function(r,o,u){return Math.min(Math.max(o,r),u)};function G(t,r){if(t.length!==r.length)throw new Error("vectors must be same length");return t.map(function(o,u){return o+r[u]})}function Y(t){return Math.max.apply(Math,t.map(Math.abs))}function T(t){return Object.freeze(t),Object.values(t).forEach(function(r){r!==null&&typeof r=="object"&&!Object.isFrozen(r)&&T(r)}),t}function K(){var t={};function r(c,l){return t[c]=(t[c]||[]).concat(l),function(){return o(c,l)}}function o(c,l){t[c]=(t[c]||[]).filter(function(e){return e!==l})}function u(c,l){c in t&&t[c].forEach(function(e){return e(l)})}return T({on:r,off:o,dispatch:u})}function Q(t){var r=[],o=function(e){return e.addEventListener("wheel",t,{passive:!1}),r.push(e),function(){return u(e)}},u=function(e){e.removeEventListener("wheel",t),r=r.filter(function(M){return M!==e})},c=function(){r.forEach(u)};return T({observe:o,unobserve:u,disconnect:c})}var ee=16*1.125,te=typeof window<"u"&&window.innerHeight||800,R=[1,ee,te];function ne(t){var r=t.deltaX*R[t.deltaMode],o=t.deltaY*R[t.deltaMode],u=(t.deltaZ||0)*R[t.deltaMode];return{timeStamp:t.timeStamp,axisDelta:[r,o,u]}}var re=[-1,-1,-1];function ie(t,r){if(!r)return t;var o=r===!0?re:r.map(function(u){return u?-1:1});return b({},t,{axisDelta:t.axisDelta.map(function(u,c){return u*o[c]})})}var ae=700,oe=function(r){return b({},r,{axisDelta:r.axisDelta.map(function(o){return J(o,-700,ae)})})},se=.6,ue=.96,le=2,z=5,H=T({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),ce=400;function Z(){return{isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:ce}}function ve(t){t===void 0&&(t={});var r=K(),o=r.on,u=r.off,c=r.dispatch,l=H,e=Z(),M,E=!1,D,_=function(n){Array.isArray(n)?n.forEach(function(a){return S(a)}):S(n)},y=function(n){return n===void 0&&(n={}),Object.values(n).some(function(a){return a==null})?l:l=T(b({},H,l,n))},W=function(n){var a=b({event:M,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:e.isMomentum,axisDelta:[0,0,0],axisVelocity:e.axisVelocity,axisMovement:e.axisMovement,get axisMovementProjection(){return G(a.axisMovement,a.axisVelocity.map(function(s){return $(s)}))}},n);c("wheel",b({},a,{previous:D})),D=a},h=function(n,a){var s=l,v=s.preventWheelAction,f=a[0],m=a[1],d=a[2];if(typeof v=="boolean")return v;switch(v){case"x":return Math.abs(f)>=n;case"y":return Math.abs(m)>=n;case"z":return Math.abs(d)>=n;default:return!1}},S=function(n){var a=oe(ie(ne(n),l.reverseSign)),s=a.axisDelta,v=a.timeStamp,f=Y(s);if(n.preventDefault&&h(f,s)&&n.preventDefault(),e.isStarted?e.isMomentum&&f>Math.max(2,e.lastAbsDelta*2)&&(w(!0),V()):V(),f===0&&Object.is&&Object.is(n.deltaX,-0)){E=!0;return}M=n,e.axisMovement=G(e.axisMovement,s),e.lastAbsDelta=f,e.scrollPointsToMerge.push({axisDelta:s,timeStamp:v}),A(),W({axisDelta:s,isStart:!e.isStartPublished}),e.isStartPublished=!0,j()},A=function(){e.scrollPointsToMerge.length===le?(e.scrollPoints.unshift({axisDeltaSum:e.scrollPointsToMerge.map(function(n){return n.axisDelta}).reduce(G),timeStamp:q(e.scrollPointsToMerge.map(function(n){return n.timeStamp}))}),C(),e.scrollPointsToMerge.length=0,e.scrollPoints.length=1,e.isMomentum||g()):e.isStartPublished||O()},O=function(){e.axisVelocity=k(e.scrollPointsToMerge).axisDelta.map(function(n){return n/e.willEndTimeout})},C=function(){var n=e.scrollPoints,a=n[0],s=n[1];if(!(!s||!a)){var v=a.timeStamp-s.timeStamp;if(!(v<=0)){var f=a.axisDeltaSum.map(function(d){return d/v}),m=f.map(function(d,F){return d/(e.axisVelocity[F]||1)});e.axisVelocity=f,e.accelerationFactors.push(m),I(v)}}},I=function(n){var a=Math.ceil(n/10)*10*1.2;e.isMomentum||(a=Math.max(100,a*2)),e.willEndTimeout=Math.min(1e3,Math.round(a))},x=function(n){return n===0?!0:n<=ue&&n>=se},g=function(){if(e.accelerationFactors.length>=z){if(E&&(E=!1,Y(e.axisVelocity)>=.2)){L();return}var n=e.accelerationFactors.slice(z*-1),a=n.every(function(s){var v=!!s.reduce(function(m,d){return m&&m<1&&m===d?1:0}),f=s.filter(x).length===s.length;return v||f});a&&L(),e.accelerationFactors=n}},L=function(){e.isMomentum=!0},V=function(){e=Z(),e.isStarted=!0,e.startTime=Date.now(),D=void 0,E=!1},j=function(){var i;return function(){clearTimeout(i),i=setTimeout(w,e.willEndTimeout)}}(),w=function(n){n===void 0&&(n=!1),e.isStarted&&(e.isMomentum&&n?W({isEnding:!0,isMomentumCancel:!0}):W({isEnding:!0}),e.isMomentum=!1,e.isStarted=!1)},p=Q(_),N=p.observe,P=p.unobserve,X=p.disconnect;return y(t),T({on:o,off:u,observe:N,unobserve:P,disconnect:X,feedWheel:_,updateOptions:y})}var fe={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};B.globalOptions=void 0;function B(t){t===void 0&&(t={});var r,o=function(){};function u(l,e){var M,E,D=e.mergeOptions,_=e.optionsAtMedia,y=D(fe,B.globalOptions),W=D(y,t);r=_(W);var h=l.internalEngine(),S=(M=r.target)!=null?M:l.containerNode().parentNode,A=(E=r.forceWheelAxis)!=null?E:h.options.axis,O=ve({preventWheelAction:A,reverseSign:[!0,!0,!1]}),C=O.observe(S),I=O.on("wheel",X),x=!1,g;function L(i){try{g=new MouseEvent("mousedown",i.event),P(g)}catch{return o()}x=!0,j(),r.wheelDraggingClass&&S.classList.add(r.wheelDraggingClass)}function V(i){x=!1,P(N("mouseup",i)),w(),r.wheelDraggingClass&&S.classList.remove(r.wheelDraggingClass)}function j(){document.documentElement.addEventListener("mousemove",p,!0),document.documentElement.addEventListener("mouseup",p,!0),document.documentElement.addEventListener("mousedown",p,!0)}function w(){document.documentElement.removeEventListener("mousemove",p,!0),document.documentElement.removeEventListener("mouseup",p,!0),document.documentElement.removeEventListener("mousedown",p,!0)}function p(i){x&&i.isTrusted&&i.stopImmediatePropagation()}function N(i,n){var a,s;if(A===h.options.axis){var v=n.axisMovement;a=v[0],s=v[1]}else{var f=n.axisMovement;s=f[0],a=f[1]}if(!h.options.skipSnaps&&!h.options.dragFree){var m=h.containerRect.width,d=h.containerRect.height;a=a<0?Math.max(a,-m):Math.min(a,m),s=s<0?Math.max(s,-d):Math.min(s,d)}return new MouseEvent(i,{clientX:g.clientX+a,clientY:g.clientY+s,screenX:g.screenX+a,screenY:g.screenY+s,movementX:a,movementY:s,button:0,bubbles:!0,cancelable:!0,composed:!0})}function P(i){l.containerNode().dispatchEvent(i)}function X(i){var n=i.axisDelta,a=n[0],s=n[1],v=A==="x"?a:s,f=A==="x"?s:a,m=i.isMomentum&&i.previous&&!i.previous.isMomentum,d=i.isEnding&&!i.isMomentum||m,F=Math.abs(v)>Math.abs(f);F&&!x&&!i.isMomentum&&L(i),x&&(d?V(i):P(N("mousemove",i)))}o=function(){C(),I(),w()}}var c={name:"wheelGestures",options:t,init:u,destroy:function(){return o()}};return c}export{B as WheelGesturesPlugin};
