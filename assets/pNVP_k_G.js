import{n as M}from"./CpkXUUET.js";import{e as x,h as f,q as m,z as L,c as k,i as T,al as H,o as $,J as q,O as C}from"./Bsm64LAv.js";const P=["innerHTML"],I=x({__name:"MazIcon",props:{src:{type:String,default:void 0},path:{type:String,default:void 0},name:{type:String,default:void 0},size:{type:String,default:void 0},title:{type:String,default:void 0},transformSource:{type:Function,default:l=>l}},emits:["loaded","unloaded","error"],setup(l,{emit:v}){const o=l,i=v,u={},s=f(),c=f();function p(){try{return M("mazIconPath")}catch{return}}const d=m(()=>o.path??p()),g=m(()=>o.src?o.src:d.value?`${d.value}/${o.name}.svg`:`/${o.name}.svg`);L(()=>{!o.name&&!o.src&&console.error('[maz-ui](MazIcon) you should provide "name" or "src" as prop')});function y(e,r){const t=e.querySelectorAll("title");if(t.length>0)t[0].textContent=r;else{const n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=r,e.append(n)}}function h(e){return Object.keys(e).reduce((r,t)=>(e[t]!==!1&&e[t]!==null&&e[t]!==void 0&&(r[t]=e[t]),r),{})}function S(e){const r={},t=e.attributes;if(!t)return r;for(let n=t.length-1;n>=0;n--)r[t[n].name]=t[n].value;return r}function w(e){e.cloneNode(!0);const r=o.transformSource(e);return o.title&&y(r,o.title),e.innerHTML}async function E(e){u[e]||(u[e]=z(e));try{s.value=await u[e],await C(),i("loaded",c.value)}catch(r){s.value&&(s.value=void 0,i("unloaded")),delete u[e],i("error",r)}}function z(e){return new Promise((r,t)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.addEventListener("load",()=>{if(n.status>=200&&n.status<400)try{let a=new DOMParser().parseFromString(n.responseText,"text/xml").querySelectorAll("svg")[0];a?(a=o.transformSource(a),r(a)):t(new Error('Loaded file is not valid SVG"'))}catch(a){t(a)}else t(new Error("Error loading SVG"))}),n.addEventListener("error",a=>t(a)),n.send()})}return H(()=>E(g.value)),(e,r)=>s.value?($(),k("svg",q({key:0,ref_key:"svgElem",ref:c,class:"m-icon m-reset-css",width:"1em",height:"1em"},{...S(s.value),...h(e.$attrs)},{style:`font-size: ${l.size}`,innerHTML:w(s.value)}),null,16,P)):T("v-if",!0)}});export{I as default};
